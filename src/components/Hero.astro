---
import { useTranslations } from '../i18n/utils';
import type { Lang } from '../i18n/utils';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const basePath = `/${lang}`;
---

<section class="relative min-h-screen w-full overflow-hidden hero-section">
  <!-- Background Image -->
  <img
    src="/hero-bg.jpg"
    alt=""
    class="absolute inset-0 w-full h-full object-cover z-0"
    loading="eager"
  />
  <!-- Dark overlay for legibility -->
  <div class="absolute inset-0 z-[1] bg-black/30"></div>

  <!-- Navigation -->
  <nav class="relative z-50 flex items-start justify-between px-6 md:px-8 lg:px-16 py-5 md:py-6">
    <!-- Logo 2x + tagline -->
    <a href={`${basePath}/`} class="flex flex-col items-start">
      <img
        src="/logo-aion-dark.png"
        alt="AION Growth Studio"
        class="w-[360px] md:w-[480px] h-auto drop-shadow-lg"
        loading="eager"
      />
      <span class="text-sm text-white/70 mt-1.5 font-normal tracking-wide">
        {t('hero.tagline')}
      </span>
    </a>

    <!-- Desktop nav pills -->
    <div class="hidden lg:flex items-center gap-2 mt-2">
      <a href={`${basePath}/#soluciones`} class="nav-pill">{t('nav.soluciones')}</a>
      <a href={`${basePath}/#casos`} class="nav-pill">{t('nav.casos')}</a>
      <a href={`${basePath}/#diagnostico`} class="nav-pill">{t('nav.diagnostico')}</a>
      <a href={`/${lang === 'es' ? '' : 'en/'}blog`} class="nav-pill">{t('nav.blog')}</a>
      <a href={`${basePath}/#contacto`} class="nav-pill">{t('nav.contacto')}</a>

      <div class="flex items-center gap-1 ml-3 px-4 py-2.5 rounded-full bg-white/10 backdrop-blur-md">
        <a href="/es/" class={`text-sm font-medium transition-colors ${lang === 'es' ? 'text-white' : 'text-white/60 hover:text-white'}`}>ES</a>
        <span class="text-white/40 text-sm">|</span>
        <a href="/en/" class={`text-sm font-medium transition-colors ${lang === 'en' ? 'text-white' : 'text-white/60 hover:text-white'}`}>EN</a>
      </div>
    </div>

    <!-- Mobile menu button -->
    <button id="mobile-menu-btn" class="lg:hidden p-2 -mr-2" aria-label="Menu" aria-expanded="false">
      <svg id="menu-open" class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg id="menu-close" class="w-7 h-7 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </nav>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="lg:hidden hidden absolute top-[100px] left-0 right-0 z-50 bg-black/80 backdrop-blur-lg border-t border-white/10">
    <div class="px-6 py-6 flex flex-col gap-2">
      <a href={`${basePath}/#soluciones`} class="mobile-pill">{t('nav.soluciones')}</a>
      <a href={`${basePath}/#casos`} class="mobile-pill">{t('nav.casos')}</a>
      <a href={`${basePath}/#diagnostico`} class="mobile-pill">{t('nav.diagnostico')}</a>
      <a href={`/${lang === 'es' ? '' : 'en/'}blog`} class="mobile-pill">{t('nav.blog')}</a>
      <a href={`${basePath}/#contacto`} class="mobile-pill">{t('nav.contacto')}</a>
      <div class="flex items-center gap-3 mt-4 pt-4 border-t border-white/10">
        <a href="/es/" class={`text-sm font-medium ${lang === 'es' ? 'text-white' : 'text-white/60'}`}>ES</a>
        <span class="text-white/30">|</span>
        <a href="/en/" class={`text-sm font-medium ${lang === 'en' ? 'text-white' : 'text-white/60'}`}>EN</a>
      </div>
    </div>
  </div>

  <!-- Hero Content -->
  <div class="relative z-10 px-6 md:px-8 lg:px-24 pt-[18vh] md:pt-[22vh]">
    <!-- Text LEFT -->
    <div class="max-w-[700px]">
      <a
        href={`${basePath}/#diagnostico`}
        class="inline-block px-8 py-4 bg-white text-[#0B1B3D] rounded-full font-semibold text-base hover:bg-cyan-300 hover:scale-105 transition-all duration-300 shadow-2xl mb-6"
      >
        {t('hero.cta')}
      </a>

      <h1 class="hero-headline text-white">
        {t('hero.title.1')}<br />
        {t('hero.title.2')}
      </h1>

      <p class="hero-subheadline text-white/60 max-w-[600px] font-bold">
        {t('hero.subtitle')}
      </p>
    </div>

    <!-- Card RIGHT, bottom aligned with button -->
    <div class="hidden lg:block absolute right-16 bottom-0 w-[280px] bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-2xl">
      <img
        src="/projects-placeholder.jpg"
        alt="Projects"
        class="w-full h-[200px] object-cover rounded-xl mb-4"
      />
      <h3 class="text-2xl font-bold text-slate-900 mb-2">
        {t('hero.card.label')}
      </h3>
      <p class="text-cyan-600 text-sm font-medium mb-1">{t('hero.card.project')}</p>
      <p class="text-slate-600 text-sm leading-relaxed whitespace-pre-line">
        {t('hero.card.title')}
      </p>
    </div>
  </div>
</section>

<style>
  .hero-section {
    position: relative;
  }

  .hero-headline {
    font-size: 2.25rem;
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 0.3em;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  }

  .hero-subheadline {
    font-size: 1.125rem;
    font-weight: 700;
    line-height: 1.3;
  }

  .nav-pill {
    padding: 0.625rem 1.5rem;
    border-radius: 9999px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    color: white;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .nav-pill:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .mobile-pill {
    display: block;
    padding: 0.75rem 1.25rem;
    border-radius: 0.75rem;
    color: rgba(255, 255, 255, 0.8);
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .mobile-pill:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }
</style>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOpen = document.getElementById('menu-open');
  const menuClose = document.getElementById('menu-close');

  if (menuBtn && mobileMenu && menuOpen && menuClose) {
    menuBtn.addEventListener('click', () => {
      const isOpen = !mobileMenu.classList.contains('hidden');
      mobileMenu.classList.toggle('hidden');
      menuOpen.classList.toggle('hidden');
      menuClose.classList.toggle('hidden');
      menuBtn.setAttribute('aria-expanded', String(!isOpen));
    });

    mobileMenu.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
        menuOpen.classList.remove('hidden');
        menuClose.classList.add('hidden');
        menuBtn.setAttribute('aria-expanded', 'false');
      });
    });
  }
</script>
