---
import { useTranslations } from '../i18n/utils';
import type { Lang } from '../i18n/utils';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const basePath = `/${lang}`;
---

<section class="relative h-screen w-full overflow-hidden">
  <!-- CSS-based abstract AI background -->
  <div class="absolute inset-0 z-0 hero-bg">
    <div class="absolute inset-0 hero-dots"></div>
    <div class="absolute inset-0 bg-gradient-to-r from-[#0B1B3D]/95 via-[#0B1B3D]/80 to-[#0B1B3D]/60"></div>
    <!-- Animated orbs for depth -->
    <div class="hero-orb hero-orb-1"></div>
    <div class="hero-orb hero-orb-2"></div>
    <div class="hero-orb hero-orb-3"></div>
  </div>

  <!-- Navigation integrated over the image -->
  <nav class="relative z-50 flex items-center justify-between px-6 md:px-8 py-5 md:py-6">
    <a href={`${basePath}/`} class="flex items-center">
      <img
        src="/logo-aion-dark.png"
        alt="AION Growth Studio"
        class="h-14 md:h-20 w-auto drop-shadow-lg"
        loading="eager"
      />
    </a>

    <!-- Desktop nav pills -->
    <div class="hidden lg:flex items-center gap-2">
      <a href={`${basePath}/#soluciones`} class="nav-pill">{t('nav.soluciones')}</a>
      <a href={`${basePath}/#casos`} class="nav-pill">{t('nav.casos')}</a>
      <a href={`${basePath}/#diagnostico`} class="nav-pill">{t('nav.diagnostico')}</a>
      <a href={`/${lang === 'es' ? '' : 'en/'}blog`} class="nav-pill">{t('nav.blog')}</a>
      <a href={`${basePath}/#contacto`} class="nav-pill">{t('nav.contacto')}</a>

      <div class="flex items-center gap-1 ml-3 px-4 py-2.5 rounded-full bg-white/10 backdrop-blur-md">
        <a href="/es/" class={`text-sm font-medium transition-colors ${lang === 'es' ? 'text-white' : 'text-white/60 hover:text-white'}`}>ES</a>
        <span class="text-white/40 text-sm">|</span>
        <a href="/en/" class={`text-sm font-medium transition-colors ${lang === 'en' ? 'text-white' : 'text-white/60 hover:text-white'}`}>EN</a>
      </div>
    </div>

    <!-- Mobile menu button -->
    <button id="mobile-menu-btn" class="lg:hidden p-2 -mr-2" aria-label="Menu" aria-expanded="false">
      <svg id="menu-open" class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg id="menu-close" class="w-7 h-7 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </nav>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="lg:hidden hidden absolute top-[72px] left-0 right-0 z-50 bg-[#0B1B3D]/95 backdrop-blur-lg border-t border-white/10">
    <div class="px-6 py-6 flex flex-col gap-2">
      <a href={`${basePath}/#soluciones`} class="mobile-pill">{t('nav.soluciones')}</a>
      <a href={`${basePath}/#casos`} class="mobile-pill">{t('nav.casos')}</a>
      <a href={`${basePath}/#diagnostico`} class="mobile-pill">{t('nav.diagnostico')}</a>
      <a href={`/${lang === 'es' ? '' : 'en/'}blog`} class="mobile-pill">{t('nav.blog')}</a>
      <a href={`${basePath}/#contacto`} class="mobile-pill">{t('nav.contacto')}</a>
      <div class="flex items-center gap-3 mt-4 pt-4 border-t border-white/10">
        <a href="/es/" class={`text-sm font-medium ${lang === 'es' ? 'text-white' : 'text-white/60'}`}>ES</a>
        <span class="text-white/30">|</span>
        <a href="/en/" class={`text-sm font-medium ${lang === 'en' ? 'text-white' : 'text-white/60'}`}>EN</a>
      </div>
    </div>
  </div>

  <!-- Main content: Text LEFT + Card RIGHT -->
  <div class="relative z-40 max-w-7xl mx-auto px-6 md:px-8 h-[calc(100vh-100px)] flex items-center">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center w-full">

      <!-- LEFT: Text -->
      <div class="max-w-2xl">
        <h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold text-white leading-[0.95] tracking-tight mb-8">
          {t('hero.title.1')}<br />
          <span class="text-white/60">{t('hero.title.2')}</span><br />
          {t('hero.title.3')}
        </h1>

        <p class="text-lg md:text-xl lg:text-2xl text-white/80 leading-relaxed mb-10 max-w-xl">
          {t('hero.subtitle')}
        </p>

        <a
          href={`${basePath}/#diagnostico`}
          class="inline-block px-8 py-4 bg-white text-[#0B1B3D] rounded-full font-semibold text-lg hover:bg-cyan-300 hover:scale-105 transition-all duration-300 shadow-2xl"
        >
          {t('hero.cta')}
        </a>

        <p class="text-sm text-white/50 mt-4">{t('hero.cta.note')}</p>
      </div>

      <!-- RIGHT: Floating Card -->
      <div class="hidden lg:block">
        <div class="relative">
          <p class="text-white/60 text-sm font-medium mb-4 tracking-wide">{t('hero.card.label')}</p>

          <div class="rounded-3xl overflow-hidden shadow-2xl ring-1 ring-white/10">
            <div class="hero-card-gradient h-[450px] relative flex items-end">
              <!-- Abstract pattern overlay -->
              <div class="absolute inset-0 hero-card-pattern"></div>
              <!-- Mesh lines decoration -->
              <svg class="absolute inset-0 w-full h-full opacity-20" viewBox="0 0 400 450" fill="none">
                <path d="M0 200 Q100 150 200 200 T400 200" stroke="rgba(255,255,255,0.3)" stroke-width="0.5" />
                <path d="M0 250 Q150 200 300 250 T400 220" stroke="rgba(255,255,255,0.2)" stroke-width="0.5" />
                <path d="M0 300 Q200 250 350 300 T400 280" stroke="rgba(255,255,255,0.15)" stroke-width="0.5" />
                <circle cx="120" cy="180" r="3" fill="rgba(0,212,255,0.6)" />
                <circle cx="280" cy="220" r="2" fill="rgba(0,212,255,0.4)" />
                <circle cx="350" cy="160" r="2.5" fill="rgba(255,255,255,0.3)" />
                <circle cx="80" cy="280" r="2" fill="rgba(0,102,255,0.5)" />
                <circle cx="200" cy="140" r="1.5" fill="rgba(255,255,255,0.4)" />
              </svg>
              <div class="relative z-10 p-8">
                <p class="text-cyan-300 text-sm font-medium mb-2">{t('hero.card.project')}</p>
                <h3 class="text-2xl font-bold text-white leading-tight whitespace-pre-line">
                  {t('hero.card.title')}
                </h3>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<style>
  .hero-bg {
    background:
      radial-gradient(ellipse at 20% 50%, rgba(26, 84, 144, 0.5) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(0, 102, 255, 0.3) 0%, transparent 50%),
      radial-gradient(ellipse at 60% 80%, rgba(0, 212, 255, 0.15) 0%, transparent 40%),
      radial-gradient(ellipse at 40% 30%, rgba(46, 117, 182, 0.2) 0%, transparent 60%),
      linear-gradient(180deg, #0B1B3D 0%, #071225 100%);
  }

  .hero-dots {
    background-image: radial-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px);
    background-size: 32px 32px;
  }

  .hero-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    animation: float 20s ease-in-out infinite;
  }

  .hero-orb-1 {
    width: 400px;
    height: 400px;
    background: rgba(0, 102, 255, 0.15);
    top: 10%;
    right: 20%;
    animation-delay: 0s;
  }

  .hero-orb-2 {
    width: 300px;
    height: 300px;
    background: rgba(0, 212, 255, 0.1);
    bottom: 20%;
    left: 10%;
    animation-delay: -7s;
  }

  .hero-orb-3 {
    width: 250px;
    height: 250px;
    background: rgba(26, 84, 144, 0.15);
    top: 40%;
    left: 50%;
    animation-delay: -14s;
  }

  @keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -20px) scale(1.05); }
    66% { transform: translate(-20px, 20px) scale(0.95); }
  }

  .hero-card-gradient {
    background: linear-gradient(135deg, #1A5490 0%, #0066FF 50%, #00D4FF 100%);
  }

  .hero-card-pattern {
    background-image:
      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.08) 0%, transparent 50%),
      radial-gradient(circle at 70% 60%, rgba(255,255,255,0.06) 0%, transparent 40%);
  }

  .nav-pill {
    padding: 0.625rem 1.5rem;
    border-radius: 9999px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    color: white;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .nav-pill:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .mobile-pill {
    display: block;
    padding: 0.75rem 1.25rem;
    border-radius: 0.75rem;
    color: rgba(255, 255, 255, 0.8);
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .mobile-pill:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }
</style>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOpen = document.getElementById('menu-open');
  const menuClose = document.getElementById('menu-close');

  if (menuBtn && mobileMenu && menuOpen && menuClose) {
    menuBtn.addEventListener('click', () => {
      const isOpen = !mobileMenu.classList.contains('hidden');
      mobileMenu.classList.toggle('hidden');
      menuOpen.classList.toggle('hidden');
      menuClose.classList.toggle('hidden');
      menuBtn.setAttribute('aria-expanded', String(!isOpen));
    });

    mobileMenu.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
        menuOpen.classList.remove('hidden');
        menuClose.classList.add('hidden');
        menuBtn.setAttribute('aria-expanded', 'false');
      });
    });
  }
</script>
